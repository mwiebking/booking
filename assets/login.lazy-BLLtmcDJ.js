import{r,s as y,j as e,B as w,t as C,c as E}from"./index-DIOBsiEa.js";import{L as c}from"./link-DOwOEkyP.js";import{u as k}from"./useRouteContext-BM9gTLXB.js";import{C as A}from"./Container-DSdYwftX.js";import{T as N}from"./TextInput-B-Irr0Y4.js";import{P as L}from"./PasswordInput-BMaknbfB.js";import{C as D}from"./Checkbox-B8baEi2I.js";import{A as p}from"./Anchor-Bnriy-3m.js";import"./InputBase-XlIlnqdv.js";import"./use-resolved-styles-api-Cu2j0j5s.js";import"./CheckIcon-C8KAeb23.js";import"./Text-Cl1jELGj.js";function M(){const u=k({from:"/login"}),[s,x]=r.useState(""),[a,g]=r.useState(""),[i,_]=r.useState(""),h=y(),f="https://ixfyejbgmefahxcopxea.supabase.co",b="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Iml4ZnllamJnbWVmYWh4Y29weGVhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzE5MzQzMTEsImV4cCI6MjA0NzUxMDMxMX0.C4NV6ZDFxDgrH4RSShCLZXonuLjHg_xsilsuYsMkDPQ";async function I(n){n.preventDefault();const d=new FormData(n.target),o=d.get("email"),l=d.get("password");if(!o.endsWith("@cphbusiness.dk")){x("Kun brugere med @cphbusiness.dk kan logge ind");return}if(!l){g("Udfyld venligst din adgangskode");return}const m=C(f,b),j=(await m.auth.signInWithPassword({email:o,password:l})).data.user,t=await m.from("users").select("*").eq("email",o).single();console.log(t),u.setUserInfo({email:j.email,firstName:t.data.first_name,lastName:t.data.last_name,phoneNumber:t.data.phone_number,role:t.data.role,profilePicture:t.data.profile_picture,emailNotifications:t.data.email_notifications,smsNotifications:t.data.sms_notifications,createdAt:t.data.created_at,authUserId:t.authuserid}),h({to:"/dashboard"})}return e.jsx(A,{style:{width:"365px",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsxs("form",{id:"login-form",style:{width:"100%",padding:"1.5rem",border:"1px solid #ddd",borderRadius:"8px",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.1)"},onSubmit:I,children:[e.jsx("h1",{className:"start",style:{marginBottom:"20px"},children:"Log ind"}),e.jsx(N,{label:"Email",placeholder:"Email",name:"email",radius:"xl",style:{marginBottom:"10px",borderColor:s?"red":"#ddd"},error:s}),e.jsx(L,{label:"Password",placeholder:"Adgangskode",name:"password",radius:"xl",style:{marginBottom:"10px",borderColor:a?"red":"#ddd"},error:a}),i&&e.jsx("div",{style:{color:"red",marginBottom:"20px"},children:i}),e.jsx(D,{label:"Husk mig",radius:"md",style:{marginBottom:"20px"}}),e.jsx(w,{type:"submit",style:{width:"100%",backgroundColor:"#1098AD",color:"#fff",padding:"10px 0",border:"none",borderRadius:"16px",cursor:"pointer"},children:"LOG IND"}),e.jsxs("p",{style:{textAlign:"center",marginTop:"20px"},children:[e.jsx(c,{to:"/forgotpassword",children:e.jsx(p,{style:{display:"block",textAlign:"center",color:"#1098AD",marginTop:"10px"},children:"Glemt adgangskode?"})}),e.jsx(c,{to:"/signup",children:e.jsx(p,{style:{display:"block",textAlign:"center",color:"#1098AD",marginTop:"10px"},children:"Opret Profil"})})]})]})})}const X=E("/login")({component:S});function S(){return e.jsx("div",{children:e.jsx(M,{})})}export{X as Route};
