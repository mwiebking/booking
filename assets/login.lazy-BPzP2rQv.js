import{r as s,s as w,j as e,B as C,t as k,c as E}from"./index-DUMZagE2.js";import{u as I}from"./useRouteContext-CzetFr9I.js";import{C as N}from"./Container-B8aff2Md.js";import{T as _}from"./TextInput-CTQi1nSy.js";import{P as v}from"./PasswordInput-CQsVCzoJ.js";import{C as A}from"./Checkbox-Bgd0LdNY.js";import"./InputBase-BidoORDV.js";import"./use-resolved-styles-api-DE_E0tfd.js";import"./CheckIcon-DMONT0wl.js";function B(){const u=I({from:"/login"}),[a,g]=s.useState(""),[n,x]=s.useState(""),[i,f]=s.useState(""),t=w(),h="https://ixfyejbgmefahxcopxea.supabase.co",b="your-public-anon-key";async function y(d){d.preventDefault();const l=new FormData(d.target),o=l.get("email"),m=l.get("password");if(!o.endsWith("@cphbusiness.dk")){g("Kun brugere med @cphbusiness.dk kan logge ind");return}if(!m){x("Udfyld venligst din adgangskode");return}const c=k(h,b),p=await c.auth.signInWithPassword({email:o,password:m});if(p.error){f("Fejl ved login. Tjek venligst dine oplysninger.");return}const j=p.data.user,r=await c.from("users").select("*").eq("email",o).single();u.setUserInfo({email:j.email,firstName:r.data.first_name,lastName:r.data.last_name,phoneNumber:r.data.phone_number,role:r.data.role,profilePicture:r.data.profile_picture,emailNotifications:r.data.email_notifications,smsNotifications:r.data.sms_notifications,createdAt:r.data.created_at,authUserId:r.authuserid}),t({to:"/dashboard"})}return e.jsx(N,{style:{width:"365px",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsxs("form",{id:"login-form",style:{width:"100%",padding:"1.5rem",border:"1px solid #ddd",borderRadius:"8px",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.1)"},onSubmit:y,children:[e.jsx("h1",{className:"start",style:{marginBottom:"20px"},children:"Log ind"}),e.jsx(_,{label:"Email",placeholder:"Email",name:"email",radius:"xl",style:{marginBottom:"10px",borderColor:a?"red":"#ddd"},error:a}),e.jsx(v,{label:"Password",placeholder:"Adgangskode",name:"password",radius:"xl",style:{marginBottom:"10px",borderColor:n?"red":"#ddd"},error:n}),i&&e.jsx("div",{style:{color:"red",marginBottom:"20px"},children:i}),e.jsx(A,{label:"Husk mig",radius:"md",style:{marginBottom:"20px"}}),e.jsx(C,{type:"submit",style:{width:"100%",backgroundColor:"#1098AD",color:"#fff",padding:"10px 0",border:"none",borderRadius:"16px",cursor:"pointer"},children:"LOG IND"}),e.jsxs("p",{style:{textAlign:"center",marginTop:"20px"},children:[e.jsx("span",{onClick:()=>t({to:"/forgotpassword"}),style:{color:"#1098AD",cursor:"pointer"},children:"Glemt adgangskode?"}),e.jsx("br",{}),e.jsx("span",{onClick:()=>t({to:"/signup"}),style:{color:"#1098AD",cursor:"pointer"},children:"Opret Profil"})]})]})})}const K=E("/login")({component:P});function P(){return e.jsx("div",{children:e.jsx(B,{})})}export{K as Route};
