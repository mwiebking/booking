import{r as o,s as I,j as e,B as j,t as y,c as w}from"./index-DtSQz7jC.js";import{u as C}from"./useRouteContext-kE7z73SB.js";import{C as E}from"./Container-D50tlWQr.js";import{T as N}from"./TextInput-Ba2msGeQ.js";import{P as k}from"./PasswordInput-DZsMU5Nt.js";import{C as D}from"./Checkbox-D_2HKpST.js";import"./InputBase-D6kPMsvQ.js";import"./use-resolved-styles-api-Ds-8n_AS.js";import"./CheckIcon-B5QJHyUy.js";function M(){const c=C({from:"/login"}),[r,p]=o.useState(""),[a,u]=o.useState(""),[i,_]=o.useState(""),x=I(),g="https://ixfyejbgmefahxcopxea.supabase.co",f="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Iml4ZnllamJnbWVmYWh4Y29weGVhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzE5MzQzMTEsImV4cCI6MjA0NzUxMDMxMX0.C4NV6ZDFxDgrH4RSShCLZXonuLjHg_xsilsuYsMkDPQ";async function h(n){n.preventDefault();const d=new FormData(n.target),s=d.get("email"),l=d.get("password");if(!s.endsWith("@cphbusiness.dk")){p("Kun brugere med @cphbusiness.dk kan logge ind");return}if(!l){u("Udfyld venligst din adgangskode");return}const m=y(g,f),b=(await m.auth.signInWithPassword({email:s,password:l})).data.user,t=await m.from("users").select("*").eq("email",s).single();console.log(t),c.setUserInfo({email:b.email,firstName:t.data.first_name,lastName:t.data.last_name,phoneNumber:t.data.phone_number,role:t.data.role,profilePicture:t.data.profile_picture,emailNotifications:t.data.email_notifications,smsNotifications:t.data.sms_notifications,createdAt:t.data.created_at,authUserId:t.authuserid}),x({to:"/dashboard"})}return e.jsx(E,{style:{width:"365px",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsxs("form",{id:"login-form",style:{width:"100%",padding:"1.5rem",border:"1px solid #ddd",borderRadius:"8px",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.1)"},onSubmit:h,children:[e.jsx("h1",{className:"start",style:{marginBottom:"20px"},children:"Log ind"}),e.jsx(N,{label:"Email",placeholder:"Email",name:"email",radius:"xl",style:{marginBottom:"10px",borderColor:r?"red":"#ddd"},error:r}),e.jsx(k,{label:"Password",placeholder:"Adgangskode",name:"password",radius:"xl",style:{marginBottom:"10px",borderColor:a?"red":"#ddd"},error:a}),i&&e.jsx("div",{style:{color:"red",marginBottom:"20px"},children:i}),e.jsx(D,{label:"Husk mig",radius:"md",style:{marginBottom:"20px"}}),e.jsx(j,{type:"submit",style:{width:"100%",backgroundColor:"#1098AD",color:"#fff",padding:"10px 0",border:"none",borderRadius:"16px",cursor:"pointer"},children:"LOG IND"}),e.jsxs("p",{style:{textAlign:"center",marginTop:"20px"},children:[e.jsx("a",{href:"./forgotpassword",style:{color:"#1098AD"},children:"Glemt adgangskode?"}),e.jsx("br",{}),e.jsx("a",{href:"./signup",style:{color:"#1098AD"},children:"Opret Profil"})]})]})})}const O=w("/login")({component:S});function S(){return e.jsx("div",{children:e.jsx(M,{})})}export{O as Route};
