import{E as P,p as E,b as z,j as e,g as B,h as U,r as x,P as L,i as I,F as _,T as m,B as F,H as R,S as y,G as k,c as M}from"./index-DA0SvMbs.js";import{C as N}from"./Container-CxgDBfFR.js";import{C as A}from"./Center-CrvBiE41.js";import{T as j}from"./Title-DNBt9IDW.js";import{C as v}from"./Checkbox-CqfDkP3b.js";import{D}from"./Divider-Dk1mV39Q.js";import"./Input-BDNiM3Y3.js";import"./use-uncontrolled-mexb2fWc.js";import"./CheckIcon-jN9qiHCB.js";const[q,J]=P("Card component was not found in tree");var b={root:"m_e615b15f",section:"m_599a2148"};const G={},C=E((r,c)=>{const d=z("CardSection",G,r),{classNames:a,className:l,style:u,styles:o,vars:t,withBorder:n,inheritPadding:s,mod:h,...p}=d,i=J();return e.jsx(B,{ref:c,mod:[{"with-border":n,"inherit-padding":s},h],...i.getStyles("section",{className:l,style:u,styles:o,classNames:a}),...p})});C.classes=b;C.displayName="@mantine/core/CardSection";const K={},H=I((r,{padding:c})=>({root:{"--card-padding":_(c)}})),S=E((r,c)=>{const d=z("Card",K,r),{classNames:a,className:l,style:u,styles:o,unstyled:t,vars:n,children:s,padding:h,...p}=d,i=U({name:"Card",props:d,classes:b,className:l,style:u,classNames:a,styles:o,unstyled:t,vars:n,varsResolver:H}),g=x.Children.toArray(s),T=g.map((f,w)=>typeof f=="object"&&f&&"type"in f&&f.type===C?x.cloneElement(f,{"data-first-section":w===0||void 0,"data-last-section":w===g.length-1||void 0}):f);return e.jsx(q,{value:{getStyles:i},children:e.jsx(L,{ref:c,unstyled:t,...i("root"),...p,children:T})})});S.classes=b;S.displayName="@mantine/core/Card";S.Section=C;function V(){const[r,c]=x.useState([]),[d,a]=x.useState(""),[l,u]=x.useState(null);return x.useEffect(()=>{(async()=>{try{const t=R.auth.user();if(t){const{data:n,error:s}=await R.from("users").select("*").eq("email",t.email).single();s?(console.error("Error fetching user data:",s),a("Error fetching user information. Please try again later.")):u(n)}else a("User not logged in.")}catch(t){a("Unexpected error occurred while fetching user information."),console.error(t)}})()},[]),x.useEffect(()=>{(async()=>{try{const{data:t,error:n}=await R.from("rooms").select("*");n?(a("Error fetching rooms. Please try again later."),console.error(n)):c(t)}catch(t){a("Unexpected error occurred while fetching rooms."),console.error(t)}})()},[]),e.jsxs(N,{style:{display:"flex",flexDirection:"column",alignItems:"center",marginLeft:"auto",marginRight:"auto"},children:[e.jsx("h1",{style:{fontSize:"2rem",marginBottom:"20px"},children:"Ledige Lokaler"}),l&&e.jsxs("div",{style:{marginBottom:"20px",textAlign:"center"},children:[e.jsxs(m,{size:"sm",children:["Logged in as: ",l.first_name," ",l.last_name]}),e.jsxs(m,{size:"sm",children:["Role: ",l.role]})]}),d&&e.jsx(m,{color:"red",style:{marginBottom:"20px"},children:d}),r.length===0?e.jsxs(B,{style:{backgroundColor:"#e0e0e0",padding:"20px",borderRadius:"10px",textAlign:"center",width:"100%",marginTop:"20px"},children:[e.jsx(m,{weight:700,style:{fontSize:"1.2rem"},children:"Ingen ledige lokaler på nuværende tidspunkt"}),e.jsx(m,{style:{fontSize:"1rem"},children:"Søg en anden dato eller tidspunkt, for at finde ledige lokaler du kan booke."})]}):e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"20px",width:"100%"},children:r.map(o=>e.jsxs(S,{shadow:"sm",padding:"lg",style:{padding:"15px",borderRadius:"10px",backgroundColor:"#f9f9f9"},children:[e.jsx(m,{weight:500,children:o.name}),e.jsx(m,{size:"sm",children:o.type}),e.jsxs(m,{size:"sm",children:["Capacity: ",o.capacity]}),e.jsxs(m,{size:"sm",children:["Equipment: ",o.equipment]}),e.jsx(F,{style:{marginTop:"10px"},children:"Book Room"})]},o.id))})]})}const $=()=>{const[r,c]=x.useState({lokaleType:[],tidsrum:[],skaerm:[],tavle:[]}),d=["Kontor 2-8 pers","Mødelokale 2-8 pers","Mødelokale 8-10 pers","Undervisningslokale 20-35 pers","Undervisningslokale 30-45 pers"],a=["8:00-9:00","9:00-10:00","10:00-11:00","11:00-12:00","12:00-13:00","13:00-14:00","14:00-15:00","15:00-16:00","16:00-17:00"],l=["Lille","Stor"],u=["Ja","Nej"],o=[{name:"Room A",lokaleType:"Kontor 2-8 pers",tidsrum:"8:00-9:00",skaerm:"Lille",tavle:"Ja"},{name:"Room B",lokaleType:"Mødelokale 2-8 pers",tidsrum:"10:00-11:00",skaerm:"Stor",tavle:"Nej"},{name:"Room C",lokaleType:"Undervisningslokale 20-35 pers",tidsrum:"11:00-12:00",skaerm:"Lille",tavle:"Ja"},{name:"Room D",lokaleType:"Mødelokale 8-10 pers",tidsrum:"9:00-10:00",skaerm:"Stor",tavle:"Nej"}],t=(s,h)=>{c(p=>{const i=p[s],g=i.includes(h)?i.filter(T=>T!==h):[...i,h];return{...p,[s]:g}})},n=o.filter(s=>{const h=r.lokaleType.length===0||r.lokaleType.includes(s.lokaleType),p=r.tidsrum.length===0||r.tidsrum.includes(s.tidsrum),i=r.skaerm.length===0||r.skaerm.includes(s.skaerm),g=r.tavle.length===0||r.tavle.includes(s.tavle);return h&&p&&i&&g});return e.jsx(N,{size:"lg",style:{height:"100vh",display:"flex"},children:e.jsx(A,{style:{flex:0},children:e.jsxs(L,{withBorder:!0,shadow:"md",p:30,radius:"md",style:{width:"400px",display:"flex",flexDirection:"column"},children:[e.jsx(j,{align:"left",mb:"sm",children:"Filter Search"}),e.jsx(y,{h:"md"}),e.jsxs("div",{children:[e.jsx(j,{order:4,children:"Lokale Type"}),e.jsx(k,{mt:"xs",spacing:"xs",children:d.map(s=>e.jsx(v,{label:s,checked:r.lokaleType.includes(s),onChange:()=>t("lokaleType",s)},s))})]}),e.jsx(y,{h:"md"}),e.jsxs("div",{children:[e.jsx(j,{order:4,children:"Tidsrum"}),e.jsx(k,{mt:"xs",spacing:"xs",children:a.map(s=>e.jsx(v,{label:s,checked:r.tidsrum.includes(s),onChange:()=>t("tidsrum",s)},s))})]}),e.jsx(y,{h:"md"}),e.jsxs("div",{children:[e.jsx(j,{order:4,children:"Skærm"}),e.jsx(k,{mt:"xs",spacing:"xs",children:l.map(s=>e.jsx(v,{label:s,checked:r.skaerm.includes(s),onChange:()=>t("skaerm",s)},s))})]}),e.jsx(y,{h:"md"}),e.jsxs("div",{children:[e.jsx(j,{order:4,children:"Tavle"}),e.jsx(k,{mt:"xs",spacing:"xs",children:u.map(s=>e.jsx(v,{label:s,checked:r.tavle.includes(s),onChange:()=>t("tavle",s)},s))})]}),e.jsx(y,{h:"md"}),e.jsxs("div",{children:[e.jsx(j,{order:4,children:"Search Results"}),n.length>0?e.jsx("ul",{children:n.map(s=>e.jsx("li",{children:s.name},s.name))}):e.jsx("p",{children:"No results match your criteria."})]})]})})})},oe=M("/_layout/booklokale")({component:O});function O(){return e.jsxs("div",{style:{display:"flex",height:"100vh"},children:[e.jsx("div",{style:{flex:2},children:e.jsx($,{})}),e.jsx(D,{orientation:"vertical",style:{height:"100%"}}),e.jsx("div",{style:{flex:3},children:e.jsx(V,{})})]})}export{oe as Route};
