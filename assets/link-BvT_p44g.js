import{r as o,u as se,ad as ne,ae as H,ac as oe,af as le,ag as K,ah as ie,ai as ce,aj as ue,ak as U,g as de}from"./index-DUMZagE2.js";const fe="Error preloading route! ☝️";function he(r,m){const t=se(),[c,v]=o.useState(!1),p=o.useRef(!1),l=ne(m),{activeProps:y=()=>({className:"active"}),inactiveProps:j=()=>({}),activeOptions:n,to:T,preload:I,preloadDelay:q,replace:B,startTransition:O,resetScroll:V,viewTransition:W,children:M,target:d,disabled:s,style:g,className:b,onClick:P,onFocus:k,onMouseEnter:S,onMouseLeave:x,onTouchStart:E,ignoreBlocker:$,...G}=r,{params:me,search:ve,hash:ye,state:Te,mask:ge,...w}=G,F=o.useMemo(()=>{try{return new URL(`${T}`),"external"}catch{}return"internal"},[T]),J=H({select:e=>e.location.search,structuralSharing:!0});r={from:oe({strict:!1,select:e=>e.pathname}),...r};const i=o.useMemo(()=>t.buildLocation(r),[t,r,J]),f=o.useMemo(()=>I??t.options.defaultPreload,[t.options.defaultPreload,I]),Q=q??t.options.defaultPreloadDelay??0,R=H({select:e=>{if(n!=null&&n.exact){if(!le(e.location.pathname,i.pathname,t.basepath))return!1}else{const a=K(e.location.pathname,t.basepath).split("/");if(!K(i.pathname,t.basepath).split("/").every((ae,re)=>ae===a[re]))return!1}return((n==null?void 0:n.includeSearch)??!0)&&!ie(e.location.search,i.search,{partial:!(n!=null&&n.exact),ignoreUndefined:!(n!=null&&n.explicitUndefined)})?!1:n!=null&&n.includeHash?e.location.hash===i.hash:!0}}),u=o.useCallback(()=>{t.preloadRoute(r).catch(e=>{console.warn(e),console.warn(fe)})},[r,t]),X=o.useCallback(e=>{e!=null&&e.isIntersecting&&u()},[u]);if(ce(l,X,{rootMargin:"100px"},{disabled:!!s||f!=="viewport"}),ue(()=>{p.current||!s&&f==="render"&&(u(),p.current=!0)},[s,u,f]),F==="external")return{...w,ref:l,type:F,href:T,...M&&{children:M},...d&&{target:d},...s&&{disabled:s},...g&&{style:g},...b&&{className:b},...P&&{onClick:P},...k&&{onFocus:k},...S&&{onMouseEnter:S},...x&&{onMouseLeave:x},...E&&{onTouchStart:E}};const Y=e=>{if(!s&&!pe(e)&&!e.defaultPrevented&&(!d||d==="_self")&&e.button===0){e.preventDefault(),de.flushSync(()=>{v(!0)});const a=t.subscribe("onResolved",()=>{a(),v(!1)});t.buildAndCommitLocation({...r,replace:B,resetScroll:V,startTransition:O,viewTransition:W,ignoreBlocker:$})}},D=e=>{s||f&&u()},Z=D,ee=e=>{if(s)return;const a=e.target||{};if(f){if(a.preloadTimeout)return;a.preloadTimeout=setTimeout(()=>{a.preloadTimeout=null,u()},Q)}},te=e=>{if(s)return;const a=e.target||{};a.preloadTimeout&&(clearTimeout(a.preloadTimeout),a.preloadTimeout=null)},h=e=>a=>{var _;(_=a.persist)==null||_.call(a),e.filter(Boolean).forEach(A=>{a.defaultPrevented||A(a)})},L=R?U(y,{})??{}:{},C=R?{}:U(j,{}),N=[b,L.className,C.className].filter(Boolean).join(" "),z={...g,...L.style,...C.style};return{...w,...L,...C,href:s?void 0:i.maskedLocation?t.history.createHref(i.maskedLocation.href):t.history.createHref(i.href),ref:l,onClick:h([P,Y]),onFocus:h([k,D]),onMouseEnter:h([S,ee]),onMouseLeave:h([x,te]),onTouchStart:h([E,Z]),disabled:!!s,target:d,...Object.keys(z).length&&{style:z},...N&&{className:N},...s&&{role:"link","aria-disabled":!0},...R&&{"data-status":"active","aria-current":"page"},...c&&{"data-transitioning":"transitioning"}}}const ke=o.forwardRef((r,m)=>{const{_asChild:t,...c}=r,{type:v,ref:p,...l}=he(c,m),y=typeof c.children=="function"?c.children({isActive:l["data-status"]==="active"}):c.children;return typeof t>"u"&&delete l.disabled,o.createElement(t||"a",{...l,ref:p},y)});function pe(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}export{ke as L};
