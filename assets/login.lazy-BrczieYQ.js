import{r as s,s as y,j as e,B as C,t as w,c as E}from"./index-Ff6dPJh5.js";import{u as k}from"./useRouteContext-CQyCK6ot.js";import{C as N}from"./Container-CgCmWW34.js";import{T as D}from"./TextInput-DQ-KejXW.js";import{P as M}from"./PasswordInput-C9sG_E5l.js";import{C as S}from"./Checkbox-DdgGvN7E.js";import"./InputBase-BMfHDGYB.js";import"./use-resolved-styles-api-BCY7d5Xv.js";import"./CheckIcon-BF30JzVd.js";function _(){const u=k({from:"/login"}),[a,x]=s.useState(""),[i,g]=s.useState(""),[n,f]=s.useState(""),t=y(),h="https://ixfyejbgmefahxcopxea.supabase.co",b="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Iml4ZnllamJnbWVmYWh4Y29weGVhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzE5MzQzMTEsImV4cCI6MjA0NzUxMDMxMX0.C4NV6ZDFxDgrH4RSShCLZXonuLjHg_xsilsuYsMkDPQ";async function I(d){d.preventDefault();const l=new FormData(d.target),o=l.get("email"),m=l.get("password");if(!o.endsWith("@cphbusiness.dk")){x("Kun brugere med @cphbusiness.dk kan logge ind");return}if(!m){g("Udfyld venligst din adgangskode");return}const c=w(h,b),p=await c.auth.signInWithPassword({email:o,password:m});if(p.error){f("Fejl ved login. Tjek venligst dine oplysninger.");return}const j=p.data.user,r=await c.from("users").select("*").eq("email",o).single();u.setUserInfo({email:j.email,firstName:r.data.first_name,lastName:r.data.last_name,phoneNumber:r.data.phone_number,role:r.data.role,profilePicture:r.data.profile_picture,emailNotifications:r.data.email_notifications,smsNotifications:r.data.sms_notifications,createdAt:r.data.created_at,authUserId:r.authuserid}),t({to:"/dashboard"})}return e.jsx(N,{style:{width:"365px",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsxs("form",{id:"login-form",style:{width:"100%",padding:"1.5rem",border:"1px solid #ddd",borderRadius:"8px",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.1)"},onSubmit:I,children:[e.jsx("h1",{className:"start",style:{marginBottom:"20px"},children:"Log ind"}),e.jsx(D,{label:"Email",placeholder:"Email",name:"email",radius:"xl",style:{marginBottom:"10px",borderColor:a?"red":"#ddd"},error:a}),e.jsx(M,{label:"Password",placeholder:"Adgangskode",name:"password",radius:"xl",style:{marginBottom:"10px",borderColor:i?"red":"#ddd"},error:i}),n&&e.jsx("div",{style:{color:"red",marginBottom:"20px"},children:n}),e.jsx(S,{label:"Husk mig",radius:"md",style:{marginBottom:"20px"}}),e.jsx(C,{type:"submit",style:{width:"100%",backgroundColor:"#1098AD",color:"#fff",padding:"10px 0",border:"none",borderRadius:"16px",cursor:"pointer"},children:"LOG IND"}),e.jsxs("p",{style:{textAlign:"center",marginTop:"20px"},children:[e.jsx("span",{onClick:()=>t({to:"/forgotpassword"}),style:{color:"#1098AD",cursor:"pointer"},children:"Glemt adgangskode?"}),e.jsx("br",{}),e.jsx("span",{onClick:()=>t({to:"/signup"}),style:{color:"#1098AD",cursor:"pointer"},children:"Opret Profil"})]})]})})}const O=E("/login")({component:A});function A(){return e.jsx("div",{children:e.jsx(_,{})})}export{O as Route};
