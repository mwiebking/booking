import{x as N,p as w,u as z,j as e,b as B,a as P,r as x,P as E,d as U,y as I,T as h,B as _,S as j,G as k,c as M}from"./index-Clk1ba7H.js";import{u as A}from"./useRouteContext-BHryblw0.js";import{C as L}from"./Container-Du4y_7Y3.js";import{C as D}from"./Center-C3eRpQIU.js";import{T as y}from"./Title-B9TslG8N.js";import{C as v}from"./Checkbox-6L8vJXhn.js";import{D as F}from"./Divider-BGNps9wJ.js";import"./Input-DjUrkIon.js";import"./CheckIcon-NS2ObLLJ.js";const[q,J]=N("Card component was not found in tree");var R={root:"m_e615b15f",section:"m_599a2148"};const G={},C=w((r,d)=>{const m=z("CardSection",G,r),{classNames:a,className:i,style:u,styles:n,vars:t,withBorder:o,inheritPadding:s,mod:l,...p}=m,c=J();return e.jsx(B,{ref:d,mod:[{"with-border":o,"inherit-padding":s},l],...c.getStyles("section",{className:i,style:u,styles:n,classNames:a}),...p})});C.classes=R;C.displayName="@mantine/core/CardSection";const K={},V=U((r,{padding:d})=>({root:{"--card-padding":I(d)}})),S=w((r,d)=>{const m=z("Card",K,r),{classNames:a,className:i,style:u,styles:n,unstyled:t,vars:o,children:s,padding:l,...p}=m,c=P({name:"Card",props:m,classes:R,className:i,style:u,classNames:a,styles:n,unstyled:t,vars:o,varsResolver:V}),g=x.Children.toArray(s),T=g.map((f,b)=>typeof f=="object"&&f&&"type"in f&&f.type===C?x.cloneElement(f,{"data-first-section":b===0||void 0,"data-last-section":b===g.length-1||void 0}):f);return e.jsx(q,{value:{getStyles:c},children:e.jsx(E,{ref:d,unstyled:t,...c("root"),...p,children:T})})});S.classes=R;S.displayName="@mantine/core/Card";S.Section=C;function $(){const[r,d]=x.useState([]),[m,a]=x.useState(""),[i,u]=x.useState(null),{supabase:n}=A();return x.useEffect(()=>{(async()=>{try{const o=n.auth.user();if(o){const{data:s,error:l}=await n.from("users").select("*").eq("email",o.email).single();l?(console.error("Error fetching user data:",l),a("Error fetching user information. Please try again later.")):u(s)}else a("User not logged in.")}catch(o){a("Unexpected error occurred while fetching user information."),console.error(o)}})()},[n]),x.useEffect(()=>{(async()=>{try{const{data:o,error:s}=await n.from("rooms").select("*");s?(a("Error fetching rooms. Please try again later."),console.error(s)):d(o)}catch(o){a("Unexpected error occurred while fetching rooms."),console.error(o)}})()},[n]),e.jsxs(L,{style:{display:"flex",flexDirection:"column",alignItems:"center",marginLeft:"auto",marginRight:"auto"},children:[e.jsx("h1",{style:{fontSize:"2rem",marginBottom:"20px"},children:"Ledige Lokaler"}),i&&e.jsxs("div",{style:{marginBottom:"20px",textAlign:"center"},children:[e.jsxs(h,{size:"sm",children:["Logged in as: ",i.first_name," ",i.last_name]}),e.jsxs(h,{size:"sm",children:["Role: ",i.role]})]}),m&&e.jsx(h,{color:"red",style:{marginBottom:"20px"},children:m}),r.length===0?e.jsxs(B,{style:{backgroundColor:"#e0e0e0",padding:"20px",borderRadius:"10px",textAlign:"center",width:"100%",marginTop:"20px"},children:[e.jsx(h,{weight:700,style:{fontSize:"1.2rem"},children:"Ingen ledige lokaler på nuværende tidspunkt"}),e.jsx(h,{style:{fontSize:"1rem"},children:"Søg en anden dato eller tidspunkt, for at finde ledige lokaler du kan booke."})]}):e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"20px",width:"100%"},children:r.map(t=>e.jsxs(S,{shadow:"sm",padding:"lg",style:{padding:"15px",borderRadius:"10px",backgroundColor:"#f9f9f9"},children:[e.jsx(h,{weight:500,children:t.name}),e.jsx(h,{size:"sm",children:t.type}),e.jsxs(h,{size:"sm",children:["Capacity: ",t.capacity]}),e.jsxs(h,{size:"sm",children:["Equipment: ",t.equipment]}),e.jsx(_,{style:{marginTop:"10px"},children:"Book Room"})]},t.id))})]})}const H=()=>{const[r,d]=x.useState({lokaleType:[],tidsrum:[],skaerm:[],tavle:[]}),m=["Kontor 2-8 pers","Mødelokale 2-8 pers","Mødelokale 8-10 pers","Undervisningslokale 20-35 pers","Undervisningslokale 30-45 pers"],a=["8:00-9:00","9:00-10:00","10:00-11:00","11:00-12:00","12:00-13:00","13:00-14:00","14:00-15:00","15:00-16:00","16:00-17:00"],i=["Lille","Stor"],u=["Ja","Nej"],n=[{name:"Room A",lokaleType:"Kontor 2-8 pers",tidsrum:"8:00-9:00",skaerm:"Lille",tavle:"Ja"},{name:"Room B",lokaleType:"Mødelokale 2-8 pers",tidsrum:"10:00-11:00",skaerm:"Stor",tavle:"Nej"},{name:"Room C",lokaleType:"Undervisningslokale 20-35 pers",tidsrum:"11:00-12:00",skaerm:"Lille",tavle:"Ja"},{name:"Room D",lokaleType:"Mødelokale 8-10 pers",tidsrum:"9:00-10:00",skaerm:"Stor",tavle:"Nej"}],t=(s,l)=>{d(p=>{const c=p[s],g=c.includes(l)?c.filter(T=>T!==l):[...c,l];return{...p,[s]:g}})},o=n.filter(s=>{const l=r.lokaleType.length===0||r.lokaleType.includes(s.lokaleType),p=r.tidsrum.length===0||r.tidsrum.includes(s.tidsrum),c=r.skaerm.length===0||r.skaerm.includes(s.skaerm),g=r.tavle.length===0||r.tavle.includes(s.tavle);return l&&p&&c&&g});return e.jsx(L,{size:"lg",style:{height:"100vh",display:"flex"},children:e.jsx(D,{style:{flex:0},children:e.jsxs(E,{withBorder:!0,shadow:"md",p:30,radius:"md",style:{width:"400px",display:"flex",flexDirection:"column"},children:[e.jsx(y,{align:"left",mb:"sm",children:"Filter Search"}),e.jsx(j,{h:"md"}),e.jsxs("div",{children:[e.jsx(y,{order:4,children:"Lokale Type"}),e.jsx(k,{mt:"xs",spacing:"xs",children:m.map(s=>e.jsx(v,{label:s,checked:r.lokaleType.includes(s),onChange:()=>t("lokaleType",s)},s))})]}),e.jsx(j,{h:"md"}),e.jsxs("div",{children:[e.jsx(y,{order:4,children:"Tidsrum"}),e.jsx(k,{mt:"xs",spacing:"xs",children:a.map(s=>e.jsx(v,{label:s,checked:r.tidsrum.includes(s),onChange:()=>t("tidsrum",s)},s))})]}),e.jsx(j,{h:"md"}),e.jsxs("div",{children:[e.jsx(y,{order:4,children:"Skærm"}),e.jsx(k,{mt:"xs",spacing:"xs",children:i.map(s=>e.jsx(v,{label:s,checked:r.skaerm.includes(s),onChange:()=>t("skaerm",s)},s))})]}),e.jsx(j,{h:"md"}),e.jsxs("div",{children:[e.jsx(y,{order:4,children:"Tavle"}),e.jsx(k,{mt:"xs",spacing:"xs",children:u.map(s=>e.jsx(v,{label:s,checked:r.tavle.includes(s),onChange:()=>t("tavle",s)},s))})]}),e.jsx(j,{h:"md"}),e.jsxs("div",{children:[e.jsx(y,{order:4,children:"Search Results"}),o.length>0?e.jsx("ul",{children:o.map(s=>e.jsx("li",{children:s.name},s.name))}):e.jsx("p",{children:"No results match your criteria."})]})]})})})},oe=M("/_layout/booklokale")({component:O});function O(){return e.jsxs("div",{style:{display:"flex",height:"100vh"},children:[e.jsx("div",{style:{flex:2},children:e.jsx(H,{})}),e.jsx(F,{orientation:"vertical",style:{height:"100%"}}),e.jsx("div",{style:{flex:3},children:e.jsx($,{})})]})}export{oe as Route};
