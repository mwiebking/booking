import{r as P,u as E,j as o,B as N,g as de,a as U,f as $,b as B,U as ue,c as z,d as D,e as J,p as Y,h as R,i as H,k as pe,l as me,m as he,n as xe}from"./index-DCk5pRIG.js";import{u as be}from"./useRouteContext-BOotIsf4.js";import{I as T,c as fe,u as ve,a as ge,C as Ce,T as G,P as ye}from"./TextInput-CfsedMZp.js";function K(e,r){return typeof e=="boolean"?e:r.autoContrast}var Q={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const ke=Q,X=P.forwardRef(({__staticSelector:e,__stylesApiProps:r,className:s,classNames:a,styles:n,unstyled:d,children:c,label:t,description:u,id:v,disabled:l,error:h,size:p,labelPosition:x="left",bodyElement:b="div",labelElement:m="label",variant:i,style:f,vars:y,mod:k,...C},_)=>{const g=E({name:e,props:r,className:s,style:f,classes:Q,classNames:a,styles:n,unstyled:d});return o.jsx(N,{...g("root"),ref:_,__vars:{"--label-fz":de(p),"--label-lh":U(p,"label-lh")},mod:[{"label-position":x},k],variant:i,size:p,...C,children:o.jsxs(N,{component:b,htmlFor:b==="label"?v:void 0,...g("body"),children:[c,o.jsxs("div",{...g("labelWrapper"),"data-disabled":l||void 0,children:[t&&o.jsx(N,{component:m,htmlFor:m==="label"?v:void 0,...g("label"),"data-disabled":l||void 0,children:t}),u&&o.jsx(T.Description,{size:p,__inheritStyles:!1,...g("description"),children:u}),h&&typeof h!="boolean"&&o.jsx(T.Error,{size:p,__inheritStyles:!1,...g("error"),children:h})]})]})})});X.displayName="@mantine/core/InlineInput";const Z=P.createContext(null),_e=Z.Provider,ee=()=>P.useContext(Z),[je,we]=fe();var oe={card:"m_26775b0a"};const Ne={withBorder:!0},Pe=z((e,{radius:r})=>({card:{"--card-radius":D(r)}})),A=$((e,r)=>{const s=B("CheckboxCard",Ne,e),{classNames:a,className:n,style:d,styles:c,unstyled:t,vars:u,checked:v,mod:l,withBorder:h,value:p,onClick:x,...b}=s,m=E({name:"CheckboxCard",classes:oe,props:s,className:n,style:d,classNames:a,styles:c,unstyled:t,vars:u,varsResolver:Pe,rootSelector:"card"}),i=ee(),f=typeof v=="boolean"?v:(i==null?void 0:i.value.includes(p||""))||!1;return o.jsx(je,{value:{checked:f},children:o.jsx(ue,{ref:r,mod:[{"with-border":h,checked:f},l],...m("card"),...b,role:"checkbox","aria-checked":f,onClick:y=>{x==null||x(y),i==null||i.onChange(p||"")}})})});A.displayName="@mantine/core/CheckboxCard";A.classes=oe;function Se({children:e,role:r}){const s=ve();return s?o.jsx("div",{role:r,"aria-labelledby":s.labelId,"aria-describedby":s.describedBy,children:e}):o.jsx(o.Fragment,{children:e})}const Ie={},V=$((e,r)=>{const{value:s,defaultValue:a,onChange:n,size:d,wrapperProps:c,children:t,readOnly:u,...v}=B("CheckboxGroup",Ie,e),[l,h]=ge({value:s,defaultValue:a,finalValue:[],onChange:n}),p=x=>{const b=typeof x=="string"?x:x.currentTarget.value;!u&&h(l.includes(b)?l.filter(m=>m!==b):[...l,b])};return o.jsx(_e,{value:{value:l,onChange:p,size:d},children:o.jsx(T.Wrapper,{size:d,ref:r,...c,...v,labelElement:"div",__staticSelector:"CheckboxGroup",children:o.jsx(Se,{role:"group",children:t})})})});V.classes=T.Wrapper.classes;V.displayName="@mantine/core/CheckboxGroup";function Re({size:e,style:r,...s}){const a=e!==void 0?{width:J(e),height:J(e),...r}:r;return o.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:a,"aria-hidden":!0,...s,children:o.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function se({indeterminate:e,...r}){return e?o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...r,children:o.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):o.jsx(Re,{...r})}var re={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const Te={icon:se},Ee=z((e,{radius:r,color:s,size:a,iconColor:n,variant:d,autoContrast:c})=>{const t=Y({color:s||e.primaryColor,theme:e}),u=t.isThemeColor&&t.shade===void 0?`var(--mantine-color-${t.color}-outline)`:t.color;return{indicator:{"--checkbox-size":U(a,"checkbox-size"),"--checkbox-radius":r===void 0?void 0:D(r),"--checkbox-color":d==="outline"?u:R(s,e),"--checkbox-icon-color":n?R(n,e):K(c,e)?H({color:s,theme:e,autoContrast:c}):void 0}}}),q=$((e,r)=>{const s=B("CheckboxIndicator",Te,e),{classNames:a,className:n,style:d,styles:c,unstyled:t,vars:u,icon:v,indeterminate:l,radius:h,color:p,iconColor:x,autoContrast:b,checked:m,mod:i,variant:f,disabled:y,...k}=s,C=v,_=E({name:"CheckboxIndicator",classes:re,props:s,className:n,style:d,classNames:a,styles:c,unstyled:t,vars:u,varsResolver:Ee,rootSelector:"indicator"}),g=we(),F=typeof m=="boolean"||typeof l=="boolean"?m||l:(g==null?void 0:g.checked)||!1;return o.jsx(N,{ref:r,..._("indicator",{variant:f}),variant:f,mod:[{checked:F,disabled:y},i],...k,children:o.jsx(C,{indeterminate:l,..._("icon")})})});q.displayName="@mantine/core/CheckboxIndicator";q.classes=re;var te={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const $e={labelPosition:"right",icon:se},Be=z((e,{radius:r,color:s,size:a,iconColor:n,variant:d,autoContrast:c})=>{const t=Y({color:s||e.primaryColor,theme:e}),u=t.isThemeColor&&t.shade===void 0?`var(--mantine-color-${t.color}-outline)`:t.color;return{root:{"--checkbox-size":U(a,"checkbox-size"),"--checkbox-radius":r===void 0?void 0:D(r),"--checkbox-color":d==="outline"?u:R(s,e),"--checkbox-icon-color":n?R(n,e):K(c,e)?H({color:s,theme:e,autoContrast:c}):void 0}}}),j=$((e,r)=>{const s=B("Checkbox",$e,e),{classNames:a,className:n,style:d,styles:c,unstyled:t,vars:u,color:v,label:l,id:h,size:p,radius:x,wrapperProps:b,checked:m,labelPosition:i,description:f,error:y,disabled:k,variant:C,indeterminate:_,icon:g,rootRef:F,iconColor:De,onChange:S,autoContrast:Ae,mod:ae,...ne}=s,w=ee(),ce=p||(w==null?void 0:w.size),le=g,I=E({name:"Checkbox",props:s,classes:te,className:n,style:d,classNames:a,styles:c,unstyled:t,vars:u,varsResolver:Be}),{styleProps:ie,rest:M}=pe(ne),W=me(h),L=w?{checked:w.value.includes(M.value),onChange:O=>{w.onChange(O),S==null||S(O)}}:{};return o.jsx(X,{...I("root"),__staticSelector:"Checkbox",__stylesApiProps:s,id:W,size:ce,labelPosition:i,label:l,description:f,error:y,disabled:k,classNames:a,styles:c,unstyled:t,"data-checked":L.checked||m||void 0,variant:C,ref:F,mod:ae,...ie,...b,children:o.jsxs(N,{...I("inner"),mod:{"data-label-position":i},children:[o.jsx(N,{component:"input",id:W,ref:r,checked:m,disabled:k,mod:{error:!!y,indeterminate:_},...I("input",{focusable:!0,variant:C}),onChange:S,...M,...L,type:"checkbox"}),o.jsx(le,{indeterminate:_,...I("icon")})]})})});j.classes={...te,...ke};j.displayName="@mantine/core/Checkbox";j.Group=V;j.Indicator=q;j.Card=A;const Fe="_container_8uoh1_1",Ge={container:Fe};function Ue(){const e=be({from:"/signup"}),[r,s]=P.useState(""),[a,n]=P.useState("");async function d(c){var m;c.preventDefault();const t=new FormData(document.querySelector("#signup-form")),u=t.get("firstName"),v=t.get("lastName"),l=t.get("email"),h=t.get("password"),p=t.get("phoneNumber")||null,x=t.get("notifyEmail")==="on",b=t.get("notifyText")==="on";if(!h||h.length<8){s("Password must be at least 8 characters long.");return}s(""),n("");try{const{data:i,error:f}=await e.supabase.auth.signUp({email:l,password:h});if(f){console.error("Sign-up error:",f.message),s("Sign-up failed. Please try again.");return}const y=(m=i.user)==null?void 0:m.email,{data:k,error:C}=await e.supabase.from("users").insert({first_name:u,last_name:v,email:y,phone_number:p,role:"student",email_notifications:x,sms_notifications:b});if(C){console.error("Error saving user details:",C.details||C.message),s("Unable to save user details. Please try again.");return}n("Account created successfully! Please log in.")}catch(i){console.error("Unexpected error during sign-up:",i.message),s("An unexpected error occurred. Please try again.")}}return o.jsx(Ce,{className:Ge.container,children:o.jsxs("form",{onSubmit:d,id:"signup-form",children:[o.jsx(G,{label:"First Name",placeholder:"John",name:"firstName",required:!0}),o.jsx(G,{label:"Last Name",placeholder:"Doe",name:"lastName",required:!0}),o.jsx(G,{label:"Email",placeholder:"email@gmail.com",name:"email",required:!0}),o.jsx(ye,{label:"Password",placeholder:"Your password",name:"password",required:!0}),o.jsx(j,{label:"Notify me via email",name:"notifyEmail"}),o.jsx(j,{label:"Notify me via text",name:"notifyText"}),r&&o.jsx("div",{style:{color:"red",marginTop:"10px"},children:r}),a&&o.jsx("div",{style:{color:"green",marginTop:"10px"},children:a}),o.jsx(he,{type:"submit",children:"Sign Up"})]})})}const We=xe("/signup")({component:ze});function ze(){return o.jsx("div",{children:o.jsx(Ue,{})})}export{We as Route};
