import{r as _,j as e,B as n,c as h}from"./index-hqYhYQDt.js";import{u as b}from"./useRouteContext-BBAj2M1X.js";import{C as w}from"./Container-C9o8TTcX.js";import{T as L}from"./TextInput-CI3aXoDJ.js";import{P as j}from"./PasswordInput-DlX31UBn.js";import{C as B}from"./Checkbox-DUnjnWXg.js";import"./InputBase-CsmqAG-L.js";import"./Input-j_6GdnTD.js";import"./use-input-props-BqvHNDfK.js";import"./use-resolved-styles-api-DGurwuO4.js";import"./ActionIcon-Ai1jDx9X.js";import"./CheckIcon-BU1xfW1f.js";const P="_container_ee6v9_1",v="_LoginButton_ee6v9_15",y="_PasswordInput_ee6v9_26",I="_TextWrapper_ee6v9_32",E="_textLabel_ee6v9_37",N="_passwordLabel_ee6v9_41",T="_forgotButton_ee6v9_45",R="_registerButton_ee6v9_57",r={container:P,LoginButton:v,PasswordInput:y,TextWrapper:I,textLabel:E,passwordLabel:N,forgotButton:T,registerButton:R};function C(){const o=b({from:"/login"}),[i,t]=_.useState(""),d={bg:"var(--mantine-color-blue-light)",mt:"md"};async function p(g){g.preventDefault();const l=new FormData(document.querySelector("#login-form")),s=l.get("email"),x=l.get("password");t("");try{const{data:c,error:u}=await o.supabase.auth.signInWithPassword({email:s,password:x});if(u){console.error("Login error:",u.message),t("Login failed. Please check your email and password.");return}const{data:a,error:m}=await o.supabase.from("users").select("first_name, last_name, role").eq("email",s).single();if(m){console.error("Error fetching user details:",m.message),t("Unable to fetch user details. Please try again.");return}const f={email:s,firstName:a.first_name,lastName:a.last_name,role:a.role};o.setUserInfo(f),window.location.href="./dashboard"}catch(c){console.error("Unexpected error during login:",c.message),t("An unexpected error occurred. Please try again.")}}return e.jsxs("div",{children:[e.jsx("h1",{children:"Log ind"}),e.jsx(w,{classNames:{root:r.container},...d,children:e.jsxs("form",{onSubmit:p,id:"login-form",children:[e.jsx(L,{label:"Email",classNames:{input:r.TextWrapper,label:r.textLabel},placeholder:"Email",name:"email",required:!0}),e.jsx(j,{label:"Password",placeholder:"Adgangskode",classNames:{input:r.PasswordInput,label:r.passwordLabel},name:"password",required:!0}),i&&e.jsx("div",{style:{color:"red",marginTop:"10px"},children:i}),e.jsx(n,{type:"button",className:r.forgotButton,children:"Glemt adgangskode?"}),e.jsx(B,{label:"Husk mig",color:"#1098ad"}),e.jsx(n,{type:"submit",className:r.LoginButton,children:"LOG IND"}),e.jsx(n,{className:r.registerButton,children:"OPRET PROFIL"})]})})]})}const $=h("/login")({component:D});function D(){return e.jsx("div",{children:e.jsx(C,{})})}export{$ as Route};
