import{r as a,w as v,j as e,G as t,B as p,M as w}from"./index-DIOBsiEa.js";import{C as f,a as u,P as y,D as c,b as k}from"./NavbarNested-wh1Ae8Zo.js";import{C as S}from"./FindRoomBar-DQnNkBYC.js";import{T as n}from"./Text-Cl1jELGj.js";import{S as j}from"./Space-B3t0MhXU.js";import{D as b}from"./Divider-rngJzIro.js";function P(){var h;const[z,d]=a.useState(!1),[g,m]=a.useState([]),[o,B]=a.useState(null),l=v();l.auth.getUser(),a.useEffect(()=>{(async()=>{try{const{data:r,error:i}=await l.from("bookings").select("*");i?(console.error("Error fetching bookings:",i.message),alert("Failed to fetch bookings. Please try again.")):m(r)}catch(r){console.error("Unexpected error:",r),alert("An unexpected error occurred. Please try again.")}})()},[l]);const C=async s=>{try{const{error:r}=await l.from("bookings").delete().eq("id",s);r?(console.error("Error canceling booking:",r.message),alert("Booking fejlede, prøv igen.")):(m(i=>i.filter(x=>x.id!==s)),d(!1),alert("Booking er nu aflyst."))}catch(r){console.error("Unexpected error:",r),alert("An unexpected error occurred. Please try again.")}};return e.jsxs(e.Fragment,{children:[g.length>0?g.map(s=>{var r;return e.jsxs(S,{shadow:"sm",padding:"lg",radius:"lg",withBorder:!0,style:{marginBottom:"20px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsx(t,{justify:"left",mb:"xs",children:e.jsx(n,{fw:600,children:s.room_name})}),e.jsxs(t,{justify:"right",mb:"xs",children:[e.jsx(f,{size:20,color:"orange"}),e.jsx(n,{size:"sm",children:s.time_slot}),e.jsx(u,{size:20,color:"orange"}),e.jsx(n,{size:"sm",children:s.date})]})]}),e.jsx(j,{h:"xl"}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[e.jsxs(t,{gap:"xl",align:"start",children:[e.jsxs(t,{gap:"xs",align:"center",children:[e.jsx(y,{size:20}),e.jsx(n,{children:s.capacity})]}),(r=s.features)==null?void 0:r.split(",").map((i,x)=>e.jsxs(t,{gap:"xs",align:"center",children:[i==="Skærm"&&e.jsx(c,{size:20}),i==="Projektor"&&e.jsx(c,{size:20}),i==="Tavle"&&e.jsx(k,{size:20}),e.jsx(n,{children:i})]},x))]}),e.jsx(p,{color:"#373A40",radius:"xl",onClick:()=>{B(s),d(!0)},children:"Aflys"})]})]},s.id)}):e.jsx(n,{children:"Ingen Bookinger fundet"}),e.jsx(w,{opened:z,onClose:()=>d(!1),size:"lg",radius:"lg",centered:!0,children:o&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx(n,{fw:600,children:o.room_name}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsx(f,{size:20,color:"orange"}),e.jsx(n,{size:"sm",children:o.time_slot}),e.jsx(u,{size:20,color:"orange"}),e.jsx(n,{size:"sm",children:o.date})]})]}),e.jsx(j,{h:"md"}),e.jsx(b,{orientation:"horizontal"}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[e.jsx(y,{size:20}),e.jsx(n,{size:"sm",children:o.capacity}),(h=o.features)==null?void 0:h.split(",").map((s,r)=>e.jsxs(t,{gap:"xs",align:"center",children:[s==="Skærm"&&e.jsx(c,{size:20}),s==="Projektor"&&e.jsx(c,{size:20}),s==="Tavle"&&e.jsx(k,{size:20}),e.jsx(n,{children:s})]},r))]}),e.jsx(j,{h:"md"}),e.jsx(p,{fullWidth:!0,color:"#373A40",mt:"lg",radius:"xl",onClick:()=>C(o.id),children:"Aflys booking"})]})})]})}function F(){return e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"start",style:{marginTop:"-10px"},children:"Mine Bookinger"}),e.jsx(P,{})]})}export{F as M};
