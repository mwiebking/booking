import{E as P,p as B,a as z,j as e,n as E,o as U,r as x,P as L,q as A,F as D,T as m,g as F,H as R,S as y,G as k,c as I,B as M}from"./index-DuNUDCH5.js";import{C as N}from"./Container-_3OuBff4.js";import{C as _}from"./Center-CHsrSkMA.js";import{T as j}from"./Title-Cm4cBN-O.js";import{C as v}from"./Checkbox-DrZrUoRK.js";import{R as q}from"./FindRoomBar-BPIS_4_W.js";import{D as J}from"./Divider-qNk10sGN.js";import"./use-input-props-YU4J-e4b.js";import"./use-resolved-styles-api-B9WK1qUR.js";import"./CheckIcon-BI7EPVtc.js";import"./DatePickerInput-7KZk0dmt.js";import"./use-disclosure-STySZcUZ.js";import"./InputBase-D__pLbqm.js";const[G,K]=P("Card component was not found in tree");var b={root:"m_e615b15f",section:"m_599a2148"};const H={},C=B((r,d)=>{const c=z("CardSection",H,r),{classNames:a,className:n,style:u,styles:o,vars:t,withBorder:l,inheritPadding:s,mod:h,...p}=c,i=K();return e.jsx(E,{ref:d,mod:[{"with-border":l,"inherit-padding":s},h],...i.getStyles("section",{className:n,style:u,styles:o,classNames:a}),...p})});C.classes=b;C.displayName="@mantine/core/CardSection";const V={},Y=A((r,{padding:d})=>({root:{"--card-padding":D(d)}})),S=B((r,d)=>{const c=z("Card",V,r),{classNames:a,className:n,style:u,styles:o,unstyled:t,vars:l,children:s,padding:h,...p}=c,i=U({name:"Card",props:c,classes:b,className:n,style:u,classNames:a,styles:o,unstyled:t,vars:l,varsResolver:Y}),g=x.Children.toArray(s),T=g.map((f,w)=>typeof f=="object"&&f&&"type"in f&&f.type===C?x.cloneElement(f,{"data-first-section":w===0||void 0,"data-last-section":w===g.length-1||void 0}):f);return e.jsx(G,{value:{getStyles:i},children:e.jsx(L,{ref:d,unstyled:t,...i("root"),...p,children:T})})});S.classes=b;S.displayName="@mantine/core/Card";S.Section=C;function $(){const[r,d]=x.useState([]),[c,a]=x.useState(""),[n,u]=x.useState(null);return x.useEffect(()=>{(async()=>{try{const t=R.auth.user();if(t){const{data:l,error:s}=await R.from("users").select("*").eq("email",t.email).single();s?(console.error("Error fetching user data:",s),a("Error fetching user information. Please try again later.")):u(l)}else a("User not logged in.")}catch(t){a("Unexpected error occurred while fetching user information."),console.error(t)}})()},[]),x.useEffect(()=>{(async()=>{try{const{data:t,error:l}=await R.from("rooms").select("*");l?(a("Error fetching rooms. Please try again later."),console.error(l)):d(t)}catch(t){a("Unexpected error occurred while fetching rooms."),console.error(t)}})()},[]),e.jsxs(N,{style:{display:"flex",flexDirection:"column",marginLeft:"auto",marginRight:"auto"},children:[e.jsx("h1",{style:{fontSize:"2rem",marginBottom:"20px"},children:"Ledige Lokaler"}),n&&e.jsxs("div",{style:{marginBottom:"20px",textAlign:"center"},children:[e.jsxs(m,{size:"sm",children:["Logged in as: ",n.first_name," ",n.last_name]}),e.jsxs(m,{size:"sm",children:["Role: ",n.role]})]}),c&&e.jsx(m,{color:"red",style:{marginBottom:"20px"},children:c}),r.length===0?e.jsxs(E,{style:{backgroundColor:"#e0e0e0",padding:"20px",borderRadius:"10px",textAlign:"center",width:"100%",marginTop:"20px"},children:[e.jsx(m,{weight:700,style:{fontSize:"1.2rem"},children:"Ingen ledige lokaler på nuværende tidspunkt"}),e.jsx(m,{style:{fontSize:"1rem"},children:"Søg en anden dato eller tidspunkt, for at finde ledige lokaler du kan booke."})]}):e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"20px",width:"100%"},children:r.map(o=>e.jsxs(S,{shadow:"sm",padding:"lg",style:{padding:"15px",borderRadius:"10px",backgroundColor:"#f9f9f9"},children:[e.jsx(m,{weight:500,children:o.name}),e.jsx(m,{size:"sm",children:o.type}),e.jsxs(m,{size:"sm",children:["Capacity: ",o.capacity]}),e.jsxs(m,{size:"sm",children:["Equipment: ",o.equipment]}),e.jsx(F,{style:{marginTop:"10px"},children:"Book Room"})]},o.id))})]})}const O=()=>{const[r,d]=x.useState({lokaleType:[],tidsrum:[],skaerm:[],tavle:[]}),c=["Kontor 2-8 pers","Mødelokale 2-8 pers","Mødelokale 8-10 pers","Undervisningslokale 20-35 pers","Undervisningslokale 30-45 pers"],a=["8:00-9:00","9:00-10:00","10:00-11:00","11:00-12:00","12:00-13:00","13:00-14:00","14:00-15:00","15:00-16:00","16:00-17:00"],n=["Lille","Stor"],u=["Ja","Nej"],o=[{name:"Room A",lokaleType:"Kontor 2-8 pers",tidsrum:"8:00-9:00",skaerm:"Lille",tavle:"Ja"},{name:"Room B",lokaleType:"Mødelokale 2-8 pers",tidsrum:"10:00-11:00",skaerm:"Stor",tavle:"Nej"},{name:"Room C",lokaleType:"Undervisningslokale 20-35 pers",tidsrum:"11:00-12:00",skaerm:"Lille",tavle:"Ja"},{name:"Room D",lokaleType:"Mødelokale 8-10 pers",tidsrum:"9:00-10:00",skaerm:"Stor",tavle:"Nej"}],t=(s,h)=>{d(p=>{const i=p[s],g=i.includes(h)?i.filter(T=>T!==h):[...i,h];return{...p,[s]:g}})},l=o.filter(s=>{const h=r.lokaleType.length===0||r.lokaleType.includes(s.lokaleType),p=r.tidsrum.length===0||r.tidsrum.includes(s.tidsrum),i=r.skaerm.length===0||r.skaerm.includes(s.skaerm),g=r.tavle.length===0||r.tavle.includes(s.tavle);return h&&p&&i&&g});return e.jsx(N,{size:"lg",style:{height:"100vh"},children:e.jsx(_,{style:{flex:0},children:e.jsxs(L,{withBorder:!0,shadow:"md",p:30,radius:"md",style:{width:"400px",display:"flex",flexDirection:"column"},children:[e.jsx(j,{align:"left",mb:"sm",children:"Filter Search"}),e.jsx(y,{h:"md"}),e.jsxs("div",{children:[e.jsx(j,{order:4,children:"Lokale Type"}),e.jsx(k,{mt:"xs",spacing:"xs",children:c.map(s=>e.jsx(v,{label:s,checked:r.lokaleType.includes(s),onChange:()=>t("lokaleType",s)},s))})]}),e.jsx(y,{h:"md"}),e.jsxs("div",{children:[e.jsx(j,{order:4,children:"Tidsrum"}),e.jsx(k,{mt:"xs",spacing:"xs",children:a.map(s=>e.jsx(v,{label:s,checked:r.tidsrum.includes(s),onChange:()=>t("tidsrum",s)},s))})]}),e.jsx(y,{h:"md"}),e.jsxs("div",{children:[e.jsx(j,{order:4,children:"Skærm"}),e.jsx(k,{mt:"xs",spacing:"xs",children:n.map(s=>e.jsx(v,{label:s,checked:r.skaerm.includes(s),onChange:()=>t("skaerm",s)},s))})]}),e.jsx(y,{h:"md"}),e.jsxs("div",{children:[e.jsx(j,{order:4,children:"Tavle"}),e.jsx(k,{mt:"xs",spacing:"xs",children:u.map(s=>e.jsx(v,{label:s,checked:r.tavle.includes(s),onChange:()=>t("tavle",s)},s))})]}),e.jsx(y,{h:"md"}),e.jsxs("div",{children:[e.jsx(j,{order:4,children:"Search Results"}),l.length>0?e.jsx("ul",{children:l.map(s=>e.jsx("li",{children:s.name},s.name))}):e.jsx("p",{children:"No results match your criteria."})]})]})})})},ce=I("/booklokale")({component:Q});function Q(){return e.jsxs("div",{style:{display:"flex",height:"100vh",width:"100%"},children:[e.jsx("div",{style:{width:300,height:"100%",display:"flex",flexDirection:"column",boxSizing:"border-box",backgroundColor:"#2c2e33"},children:e.jsx(M,{})}),e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"2rem"},children:[e.jsx(q,{}),e.jsxs("div",{style:{display:"flex",gap:"1rem",paddingTop:"2rem"},children:[e.jsx("div",{style:{flex:2},children:e.jsx(O,{})}),e.jsx(J,{orientation:"vertical",style:{height:"auto"}}),e.jsx("div",{style:{flex:3},children:e.jsx($,{})})]})]})]})}export{ce as Route};
