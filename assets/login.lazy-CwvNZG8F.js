import{r as L,o as j,j as e,B as i,c as v}from"./index-DA0SvMbs.js";import{u as B}from"./useRouteContext-CGY0w-r5.js";import{C as P}from"./Container-CxgDBfFR.js";import{T as y}from"./TextInput-DdWQtfiY.js";import{P as C}from"./PasswordInput-D9taPJyK.js";import{C as k}from"./Checkbox-CqfDkP3b.js";import"./InputBase-DQDemRQg.js";import"./Input-BDNiM3Y3.js";import"./use-input-props-DuMLzAAL.js";import"./use-resolved-styles-api-DbX5XPyk.js";import"./use-uncontrolled-mexb2fWc.js";import"./CheckIcon-jN9qiHCB.js";const I="_container_ee6v9_1",E="_LoginButton_ee6v9_15",N="_PasswordInput_ee6v9_26",R="_TextWrapper_ee6v9_32",T="_textLabel_ee6v9_37",D="_passwordLabel_ee6v9_41",F="_forgotButton_ee6v9_45",W="_registerButton_ee6v9_57",t={container:I,LoginButton:E,PasswordInput:N,TextWrapper:R,textLabel:T,passwordLabel:D,forgotButton:F,registerButton:W};function q(){const r=B({from:"/login"}),[l,o]=L.useState(""),s=j(),p={bg:"var(--mantine-color-blue-light)",mt:"md"};async function g(h){h.preventDefault();const c=new FormData(document.querySelector("#login-form")),a=c.get("email"),b=c.get("password");o("");try{const{data:u,error:m}=await r.supabase.auth.signInWithPassword({email:a,password:b});if(m){console.error("Login error:",m.message),o("Login failed. Please check your email and password.");return}const{data:n,error:d}=await r.supabase.from("users").select("first_name, last_name, role").eq("email",a).single();if(d){console.error("Error fetching user details:",d.message),o("Unable to fetch user details. Please try again.");return}const w={email:a,firstName:n.first_name,lastName:n.last_name,role:n.role};r.setUserInfo(w),s.navigate("/_layout/dashboard")}catch(u){console.error("Unexpected error during login:",u.message),o("An unexpected error occurred. Please try again.")}}function f(){s.navigate("../login")}function x(){s.navigate("../forgotpassword")}const _=()=>{console.log("Button clicked")};return e.jsxs("div",{children:[e.jsx("h1",{children:"Log ind"}),e.jsx(P,{classNames:{root:t.container},...p,children:e.jsxs("form",{onSubmit:g,id:"login-form",children:[e.jsx(y,{label:"Email",classNames:{input:t.TextWrapper,label:t.textLabel},placeholder:"Email",name:"email",required:!0}),e.jsx(C,{label:"Password",placeholder:"Adgangskode",classNames:{input:t.PasswordInput,label:t.passwordLabel},name:"password",required:!0}),l&&e.jsx("div",{style:{color:"red",marginTop:"10px"},children:l}),e.jsx(i,{type:"button",className:t.forgotButton,onClick:x,children:"Glemt adgangskode?"}),e.jsx(k,{label:"Husk mig",color:"#1098ad"}),e.jsx(i,{type:"submit",className:t.LoginButton,children:"LOG IND"}),e.jsx(i,{type:"button",className:t.registerButton,onClick:f,children:"OPRET PROFIL"}),e.jsx("button",{onClick:_,children:"Click me"})]})})]})}const X=v("/login")({component:O});function O(){return e.jsx("div",{children:e.jsx(q,{})})}export{X as Route};
