import{r as c,u as P,j as e,c as E}from"./index-DmmDrzxo.js";import{u as R}from"./useRouteContext-CGbX7HxZ.js";import{C as S}from"./Container-Dp6MU5Ma.js";import{T as a}from"./TextInput-BZm6Xtbd.js";import{P as u}from"./PasswordInput-oLvzcuel.js";import{C as p}from"./Checkbox-BGFu9RHr.js";import{A as k}from"./Anchor-CV02ewqa.js";import"./InputBase-KrdiBTfs.js";import"./use-input-props-DIjunrEv.js";import"./use-resolved-styles-api-DHcCYcdm.js";import"./CheckIcon-a9W9QsT-.js";function A(){const o=R({from:"/signup"}),[i,r]=c.useState(""),[n,l]=c.useState(""),g=P();async function x(f){f.preventDefault();const t=new FormData(document.querySelector("#signup-form")),y=t.get("firstName"),h=t.get("lastName"),s=t.get("email"),m=t.get("password"),b=t.get("confirmPassword"),j=t.get("notifyEmail")==="on",w=t.get("notifyText")==="on";if(r(""),l(""),m!==b){r("Passwords do not match. Please try again.");return}try{const{data:d,error:v}=await o.supabase.from("users").select("email").eq("email",s).single();if(d){r("This email is already registered. Please log in.");return}const{data:T,error:B}=await o.supabase.auth.signUp({email:s,password:m});if(B){r("Sign-up failed. Please try again.");return}await o.supabase.from("users").insert({first_name:y,last_name:h,email:s,role:"student",email_notifications:j,sms_notifications:w}),l("Account created successfully! Please log in.")}catch{r("An unexpected error occurred. Please try again.")}}return e.jsx(S,{style:{width:"365px",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsxs("form",{id:"signup-form",style:{width:"100%",padding:"1.5rem",border:"1px solid #ddd",borderRadius:"8px",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.1)"},onSubmit:x,children:[e.jsx("h1",{style:{marginBottom:"20px",textAlign:"center"},children:"Opret Profil"}),e.jsx(a,{placeholder:"Fornavn",name:"firstName",required:!0,radius:"xl",style:{marginBottom:"20px"}}),e.jsx(a,{placeholder:"Efternavn",name:"lastName",required:!0,radius:"xl",style:{marginBottom:"20px"}}),e.jsx(a,{placeholder:"Email",name:"email",required:!0,radius:"xl",style:{marginBottom:"20px"}}),e.jsx(u,{placeholder:"Adgangskode",name:"password",required:!0,radius:"xl",style:{marginBottom:"20px"}}),e.jsx(u,{placeholder:"Bekræft adgangskode",name:"confirmPassword",required:!0,radius:"xl",style:{marginBottom:"20px"}}),e.jsx(p,{label:"Vil gerne modtage notifikationer på SMS",name:"notifyText",radius:"md",style:{marginBottom:"20px"}}),e.jsx(p,{label:"Vil gerne modtage notifikationer på mail",name:"notifyEmail",radius:"md",style:{marginBottom:"20px"}}),i&&e.jsx("div",{style:{color:"red",marginBottom:"20px"},children:i}),n&&e.jsx("div",{style:{color:"green",marginBottom:"20px"},children:n}),e.jsx("button",{type:"submit",style:{display:"block",marginBottom:"20px",width:"100%",backgroundColor:"#1098AD",color:"#fff",padding:"10px 0",border:"none",borderRadius:"16px",cursor:"pointer"},children:"OPRET BRUGER"}),e.jsx(k,{onClick:()=>g.navigate("../login"),style:{display:"block",textAlign:"center",color:"#1098AD",marginTop:"10px"},children:"Allerede en bruger? Log ind"})]})})}const z=E("/signup")({component:C});function C(){return e.jsx("div",{children:e.jsx(A,{})})}export{z as Route};
