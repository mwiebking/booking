import{x as P,p as z,u as B,j as e,b as E,a as U,r as x,P as L,d as I,y as _,T as m,B as M,z as R,S as j,G as k,c as A}from"./index-BiJi3uwm.js";import{C as N}from"./Container-Bt-b6z5W.js";import{C as D}from"./Center-Dj9x0aTj.js";import{T as y}from"./Title-Bpk6Sk71.js";import{C as v}from"./Checkbox-CDLLNdRQ.js";import{D as F}from"./Divider-p5TquQIh.js";import"./Input-s0Rkpycx.js";import"./CheckIcon-GMa0bEmq.js";const[q,J]=P("Card component was not found in tree");var b={root:"m_e615b15f",section:"m_599a2148"};const G={},C=z((r,c)=>{const d=B("CardSection",G,r),{classNames:n,className:l,style:u,styles:a,vars:t,withBorder:o,inheritPadding:s,mod:h,...p}=d,i=J();return e.jsx(E,{ref:c,mod:[{"with-border":o,"inherit-padding":s},h],...i.getStyles("section",{className:l,style:u,styles:a,classNames:n}),...p})});C.classes=b;C.displayName="@mantine/core/CardSection";const K={},V=I((r,{padding:c})=>({root:{"--card-padding":_(c)}})),S=z((r,c)=>{const d=B("Card",K,r),{classNames:n,className:l,style:u,styles:a,unstyled:t,vars:o,children:s,padding:h,...p}=d,i=U({name:"Card",props:d,classes:b,className:l,style:u,classNames:n,styles:a,unstyled:t,vars:o,varsResolver:V}),g=x.Children.toArray(s),T=g.map((f,w)=>typeof f=="object"&&f&&"type"in f&&f.type===C?x.cloneElement(f,{"data-first-section":w===0||void 0,"data-last-section":w===g.length-1||void 0}):f);return e.jsx(q,{value:{getStyles:i},children:e.jsx(L,{ref:c,unstyled:t,...i("root"),...p,children:T})})});S.classes=b;S.displayName="@mantine/core/Card";S.Section=C;function $(){const[r,c]=x.useState([]),[d,n]=x.useState(""),[l,u]=x.useState(null);return x.useEffect(()=>{(async()=>{try{const t=R.auth.user();if(t){const{data:o,error:s}=await R.from("users").select("*").eq("email",t.email).single();s?(console.error("Error fetching user data:",s),n("Error fetching user information. Please try again later.")):u(o)}else n("User not logged in.")}catch(t){n("Unexpected error occurred while fetching user information."),console.error(t)}})()},[]),x.useEffect(()=>{(async()=>{try{const{data:t,error:o}=await R.from("rooms").select("*");o?(n("Error fetching rooms. Please try again later."),console.error(o)):c(t)}catch(t){n("Unexpected error occurred while fetching rooms."),console.error(t)}})()},[]),e.jsxs(N,{style:{display:"flex",flexDirection:"column",alignItems:"center",marginLeft:"auto",marginRight:"auto"},children:[e.jsx("h1",{style:{fontSize:"2rem",marginBottom:"20px"},children:"Ledige Lokaler"}),l&&e.jsxs("div",{style:{marginBottom:"20px",textAlign:"center"},children:[e.jsxs(m,{size:"sm",children:["Logged in as: ",l.first_name," ",l.last_name]}),e.jsxs(m,{size:"sm",children:["Role: ",l.role]})]}),d&&e.jsx(m,{color:"red",style:{marginBottom:"20px"},children:d}),r.length===0?e.jsxs(E,{style:{backgroundColor:"#e0e0e0",padding:"20px",borderRadius:"10px",textAlign:"center",width:"100%",marginTop:"20px"},children:[e.jsx(m,{weight:700,style:{fontSize:"1.2rem"},children:"Ingen ledige lokaler på nuværende tidspunkt"}),e.jsx(m,{style:{fontSize:"1rem"},children:"Søg en anden dato eller tidspunkt, for at finde ledige lokaler du kan booke."})]}):e.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"20px",width:"100%"},children:r.map(a=>e.jsxs(S,{shadow:"sm",padding:"lg",style:{padding:"15px",borderRadius:"10px",backgroundColor:"#f9f9f9"},children:[e.jsx(m,{weight:500,children:a.name}),e.jsx(m,{size:"sm",children:a.type}),e.jsxs(m,{size:"sm",children:["Capacity: ",a.capacity]}),e.jsxs(m,{size:"sm",children:["Equipment: ",a.equipment]}),e.jsx(M,{style:{marginTop:"10px"},children:"Book Room"})]},a.id))})]})}const H=()=>{const[r,c]=x.useState({lokaleType:[],tidsrum:[],skaerm:[],tavle:[]}),d=["Kontor 2-8 pers","Mødelokale 2-8 pers","Mødelokale 8-10 pers","Undervisningslokale 20-35 pers","Undervisningslokale 30-45 pers"],n=["8:00-9:00","9:00-10:00","10:00-11:00","11:00-12:00","12:00-13:00","13:00-14:00","14:00-15:00","15:00-16:00","16:00-17:00"],l=["Lille","Stor"],u=["Ja","Nej"],a=[{name:"Room A",lokaleType:"Kontor 2-8 pers",tidsrum:"8:00-9:00",skaerm:"Lille",tavle:"Ja"},{name:"Room B",lokaleType:"Mødelokale 2-8 pers",tidsrum:"10:00-11:00",skaerm:"Stor",tavle:"Nej"},{name:"Room C",lokaleType:"Undervisningslokale 20-35 pers",tidsrum:"11:00-12:00",skaerm:"Lille",tavle:"Ja"},{name:"Room D",lokaleType:"Mødelokale 8-10 pers",tidsrum:"9:00-10:00",skaerm:"Stor",tavle:"Nej"}],t=(s,h)=>{c(p=>{const i=p[s],g=i.includes(h)?i.filter(T=>T!==h):[...i,h];return{...p,[s]:g}})},o=a.filter(s=>{const h=r.lokaleType.length===0||r.lokaleType.includes(s.lokaleType),p=r.tidsrum.length===0||r.tidsrum.includes(s.tidsrum),i=r.skaerm.length===0||r.skaerm.includes(s.skaerm),g=r.tavle.length===0||r.tavle.includes(s.tavle);return h&&p&&i&&g});return e.jsx(N,{size:"lg",style:{height:"100vh",display:"flex"},children:e.jsx(D,{style:{flex:0},children:e.jsxs(L,{withBorder:!0,shadow:"md",p:30,radius:"md",style:{width:"400px",display:"flex",flexDirection:"column"},children:[e.jsx(y,{align:"left",mb:"sm",children:"Filter Search"}),e.jsx(j,{h:"md"}),e.jsxs("div",{children:[e.jsx(y,{order:4,children:"Lokale Type"}),e.jsx(k,{mt:"xs",spacing:"xs",children:d.map(s=>e.jsx(v,{label:s,checked:r.lokaleType.includes(s),onChange:()=>t("lokaleType",s)},s))})]}),e.jsx(j,{h:"md"}),e.jsxs("div",{children:[e.jsx(y,{order:4,children:"Tidsrum"}),e.jsx(k,{mt:"xs",spacing:"xs",children:n.map(s=>e.jsx(v,{label:s,checked:r.tidsrum.includes(s),onChange:()=>t("tidsrum",s)},s))})]}),e.jsx(j,{h:"md"}),e.jsxs("div",{children:[e.jsx(y,{order:4,children:"Skærm"}),e.jsx(k,{mt:"xs",spacing:"xs",children:l.map(s=>e.jsx(v,{label:s,checked:r.skaerm.includes(s),onChange:()=>t("skaerm",s)},s))})]}),e.jsx(j,{h:"md"}),e.jsxs("div",{children:[e.jsx(y,{order:4,children:"Tavle"}),e.jsx(k,{mt:"xs",spacing:"xs",children:u.map(s=>e.jsx(v,{label:s,checked:r.tavle.includes(s),onChange:()=>t("tavle",s)},s))})]}),e.jsx(j,{h:"md"}),e.jsxs("div",{children:[e.jsx(y,{order:4,children:"Search Results"}),o.length>0?e.jsx("ul",{children:o.map(s=>e.jsx("li",{children:s.name},s.name))}):e.jsx("p",{children:"No results match your criteria."})]})]})})})},te=A("/_layout/booklokale")({component:O});function O(){return e.jsxs("div",{style:{display:"flex",height:"100vh"},children:[e.jsx("div",{style:{flex:2},children:e.jsx(H,{})}),e.jsx(F,{orientation:"vertical",style:{height:"100%"}}),e.jsx("div",{style:{flex:3},children:e.jsx($,{})})]})}export{te as Route};
