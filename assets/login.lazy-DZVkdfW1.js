import{r as f,u as h,j as e,c as y}from"./index-DmmDrzxo.js";import{u as b}from"./useRouteContext-CGbX7HxZ.js";import{C as j}from"./Container-Dp6MU5Ma.js";import{T as w}from"./TextInput-BZm6Xtbd.js";import{P as k}from"./PasswordInput-oLvzcuel.js";import{A as c}from"./Anchor-CV02ewqa.js";import{C}from"./Checkbox-BGFu9RHr.js";import"./InputBase-KrdiBTfs.js";import"./use-input-props-DIjunrEv.js";import"./use-resolved-styles-api-DHcCYcdm.js";import"./CheckIcon-a9W9QsT-.js";function R(){const o=b({from:"/login"}),[n,r]=f.useState(""),t=h();async function g(p){p.preventDefault();const i=new FormData(document.querySelector("#login-form")),s=i.get("email"),u=i.get("password");r("");try{const{data:l,error:d}=await o.supabase.auth.signInWithPassword({email:s,password:u});if(d){console.error("Login error:",d.message),r("Login failed. Please check your email and password.");return}const{data:a,error:m}=await o.supabase.from("users").select("first_name, last_name, role").eq("email",s).single();if(m){console.error("Error fetching user details:",m.message),r("Unable to fetch user details. Please try again.");return}const x={email:s,firstName:a.first_name,lastName:a.last_name,role:a.role};o.setUserInfo(x),t.navigate("/_layout/dashboard")}catch(l){console.error("Unexpected error during login:",l.message),r("An unexpected error occurred. Please try again.")}}return e.jsx(j,{style:{width:"365px",height:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsxs("form",{id:"login-form",style:{width:"100%",padding:"1.5rem",border:"1px solid #ddd",borderRadius:"8px",boxShadow:"0px 4px 6px rgba(0, 0, 0, 0.1)"},onSubmit:g,children:[e.jsx("h1",{style:{marginBottom:"20px",textAlign:"center"},children:"Log ind"}),e.jsx(w,{placeholder:"Email",name:"email",required:!0,radius:"xl",style:{marginBottom:"20px"}}),e.jsx(k,{placeholder:"Adgangskode",name:"password",required:!0,radius:"xl",style:{marginBottom:"10px"}}),n&&e.jsx("div",{style:{color:"red",marginBottom:"20px"},children:n}),e.jsx(c,{onClick:()=>{console.log("Navigating to forgot password..."),t.navigate("./forgotpassword")},style:{display:"block",marginBottom:"20px",color:"#868E96"},children:"Glemt adgangskode?"}),e.jsx(C,{label:"Husk mig",color:"#1098ad",style:{marginBottom:"20px"},radius:"md"}),e.jsx("button",{type:"submit",style:{display:"block",marginBottom:"20px",width:"100%",backgroundColor:"#1098AD",color:"#fff",padding:"10px 0",border:"none",borderRadius:"16px",cursor:"pointer"},children:"LOG IND"}),e.jsx(c,{onClick:()=>{console.log("Navigating to /login..."),t.navigate("../login")},style:{display:"block",textAlign:"center",color:"#1098AD",marginTop:"10px"},children:"OPRET PROFIL"})]})})}const S=y("/login")({component:v});function v(){return e.jsx("div",{children:e.jsx(R,{})})}export{S as Route};
